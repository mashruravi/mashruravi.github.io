<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.fa5f72f2c2119b907cf1.css" id="gatsby-global-css">@import url(https://fonts.googleapis.com/css?family=Raleway|Roboto&display=swap);@font-face{font-family:Socialico;src:url(/static/Socialico-Regular-1fd9a7b1ba4a914c010b8a8ff0636c61.woff)}@font-face{font-family:SocialicoPlus;src:url(/static/SocialicoPlus-Plus-36c8776ee66b40b4175cfc1bb94e275f.woff)}body{margin:0;-moz-osx-font-smoothing:grayscale;font-family:Roboto,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased}header{height:98px;display:flex;justify-content:flex-end;align-items:center;padding:0 16px;background-color:hsla(0,0%,100%,.95)}.hdr-normal{display:block}.hdr-col{display:none}.header-link{color:#6c6c6c;text-decoration:none;font-family:Raleway;margin:0 18px;padding:8px 16px;border-radius:10px}.active-header-link{color:#fff;background-color:#6c6c6c}.prf-hdr-ctr{color:#6c6c6c;font-size:36px;margin:36px;display:grid;grid-template-columns:minmax(250px,25%) auto}.prf-hdr-intro>div{line-height:36px;margin-bottom:36px}.prf-hdr-img{margin:auto}.prf-hdr-social{display:flex}.hdr-col-menu{width:50px;height:40px;position:relative;cursor:pointer}.hdr-col-menu-bar{position:absolute;height:2px;background-color:#6c6c6c;left:12px;right:12px}.hdr-col-menu-bar-1{top:14px;transition:top .25s ease-out .15s,transform .15s ease-out}.hdr-col-menu-bar-2{bottom:14px;transition:bottom .25s ease-out .15s,transform .15s ease-out}.hdr-col-menu-bar-1-open{top:19px;transform:rotate(45deg);transition:top .15s ease-out,transform .25s ease-out .15s}.hdr-col-menu-bar-2-open{bottom:19px;transform:rotate(-45deg);transition:bottom .15s ease-out,transform .25s ease-out .15s}.hdr-col-itm-ctr{background-color:hsla(0,0%,100%,.95);position:absolute;left:0;right:0;top:98px;height:0;transition:.35s ease-out;overflow:hidden}.hdr-col-itm-ctr-exp{height:calc(100vh - 98px)}.hdr-col-itm-ctr-inner{display:flex;flex-direction:column;align-items:center;opacity:0;transition:opacity .25s ease-out .1s}.hdr-col-itm-ctr-inner-exp{opacity:1}.header-link-col{font-size:36px;height:48px;text-decoration:none;margin:16px 0;display:flex;align-items:center;color:#6c6c6c;padding:8px 24px;border-radius:10px}.section-container{margin:16px 64px;padding:32px 0}.section-header{color:#6c6c6c;font-size:18px;font-weight:700;margin:16px auto;max-width:800px}.section-body{display:flex;flex-wrap:wrap;justify-content:center;max-width:1000px;margin:0 auto}.tech-item{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;box-sizing:border-box;padding:16px;width:180px}.tech-item>img{height:60px}.tech-item>span{color:#6c6c6c;margin:8px 0}.proj-item{width:260px;height:300px;box-shadow:0 0 8px 0 rgba(0,0,0,.2),0 0 50px 0 rgba(0,0,0,.09);margin:32px;padding:16px;color:#6c6c6c;display:flex;flex-direction:column;box-sizing:border-box;cursor:pointer;transition:box-shadow .2s ease-out}.proj-item:hover{box-shadow:0 0 16px 0 rgba(0,0,0,.2),0 0 50px 0 rgba(0,0,0,.09)}.proj-item-title{font-size:24px;margin:24px 0;text-align:center}.proj-item-desc{font-size:16px;margin:0 16px}.proj-item-spacer{margin:auto}.proj-item-tags{display:flex}.proj-item-tags-itm{margin-right:4px;font-size:12px;padding:4px 12px;border-radius:10px;color:#fff}.tag-datascience{background-color:#ff6060}.tag-webdev{background-color:#209d21}.tag-educ{background-color:#ff9628}.tag-ai{background-color:#20259d}.tag-dl{background-color:#a907c4}.tag-cv{background-color:#a8a600}footer{padding:48px 16px}.blog-header{color:#6c6c6c;font-size:36px;text-align:center}.blog-list{max-width:650px;margin:0 auto;padding:0 16px}.blog-list-item{display:flex;flex-direction:column;margin:24px 0;padding:16px;color:#6c6c6c;text-decoration:none;transition:color .15s linear,border .15s linear;font-size:18px;box-sizing:border-box;border:1px solid transparent}.blog-list-item span:nth-child(2){font-size:12px}.blog-list-item:hover{color:#0c0c0c;border:1px solid rgba(0,0,0,.3)}.blog-content{padding:0 16px;max-width:800px;margin:0 auto;line-height:1.5;font-family:-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,Arial,sans-serif}.blog-content blockquote{background:rgba(0,0,0,.03);padding:8px 32px;white-space:break-spaces;word-wrap:break-word}.blog-content h1{color:#6c6c6c}.blog-content p{font-size:1.2em}.blog-body{margin-bottom:36px;text-align:justify}.blog-body code{background-color:#d3d3d3;padding:4px 6px}.blog-body pre{background:#d3d3d3;padding:24px 12px;overflow:scroll;font-size:1.2rem}.blog-body pre code{padding:0}@media only screen and (max-width:600px){.prf-hdr-ctr{grid-template-columns:100%;font-size:24px;margin:16px;text-align:center}.prf-hdr-intro>div{line-height:24px;margin-bottom:16px}.prf-hdr-img{margin:24px auto}.prf-hdr-social{margin:16px auto}.hdr-normal{display:none}.hdr-col{display:block}.section-container{margin:64px 8px;padding:0}.section-header{text-align:center}.tech-item{width:110px}.tech-item>img{height:36px}.tech-item>span{text-align:center}.proj-item{width:220px;height:260px;margin:24px}.proj-item-title{font-size:22px;margin:24px 0;text-align:center}.proj-item-desc{font-size:14px}.proj-item-tags-itm{font-size:10px;padding:4px 8px}footer{padding:24px 8px}.blog-header{text-align:left;padding:0 16px}.blog-content h1{text-align:center}}@media only screen and (min-width:601px) and (max-width:900px){.prf-hdr-ctr{font-size:26px}.section-container{margin:32px 16px}.section-header{margin-left:48px}.proj-item{width:220px;height:260px;margin:24px}.proj-item-title{font-size:22px;margin:24px 0;text-align:center}.proj-item-desc{font-size:14px}.proj-item-tags-itm{font-size:10px;padding:4px 8px}footer{padding:48px 16px}.blog-header{text-align:center}}.social-icon{margin:0 8px;font-size:64px}.social-icon>a{text-decoration:none;color:#6c6c6c;transition:.15s linear}.si{font-family:Socialico}.sip{font-family:SocialicoPlus}.si-linkedin>a:hover{color:#0077b5}.si-twitter>a:hover{color:#1ea1f2}.si-mail>a:hover{color:red}.si-github>a:hover{color:#000}</style><meta name="generator" content="Gatsby 2.31.1"/><title data-react-helmet="true">Changes in the `executeScript` method for Chrome extensions - Blog - Ravi Mashru</title><meta data-react-helmet="true" name="description" content="Ravi Mashru&#x27;s home page on the internet - personal portfolio, blog and notes."/><meta data-react-helmet="true" property="og:title" content="Changes in the `executeScript` method for Chrome extensions - Blog"/><meta data-react-helmet="true" property="og:description" content="Ravi Mashru&#x27;s home page on the internet - personal portfolio, blog and notes."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@mashruravi"/><meta data-react-helmet="true" name="twitter:title" content="Changes in the `executeScript` method for Chrome extensions - Blog"/><meta data-react-helmet="true" name="twitter:description" content="Ravi Mashru&#x27;s home page on the internet - personal portfolio, blog and notes."/><link rel="icon" href="/favicon-32x32.png?v=86476019a66cd05dc3116d3ffde5ff93" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#323232"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=86476019a66cd05dc3116d3ffde5ff93"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=86476019a66cd05dc3116d3ffde5ff93"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=86476019a66cd05dc3116d3ffde5ff93"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=86476019a66cd05dc3116d3ffde5ff93"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=86476019a66cd05dc3116d3ffde5ff93"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=86476019a66cd05dc3116d3ffde5ff93"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=86476019a66cd05dc3116d3ffde5ff93"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=86476019a66cd05dc3116d3ffde5ff93"/><link as="script" rel="preload" href="/webpack-runtime-185923be6d8fe92c21bd.js"/><link as="script" rel="preload" href="/framework-741ade27086b2708e961.js"/><link as="script" rel="preload" href="/app-74a31bded70636548752.js"/><link as="script" rel="preload" href="/styles-e9d24b1846c7d6eb9685.js"/><link as="script" rel="preload" href="/commons-eec8a13b1d76aa1aeedd.js"/><link as="script" rel="preload" href="/component---src-components-blog-layout-js-88c55709438fb4ec120a.js"/><link as="fetch" rel="preload" href="/page-data/blog/2021-04-14-executescript-chrome-extension/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3069025275.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="position:fixed;top:0;left:0;right:0;z-index:1"><header><div class="hdr-normal"><a class="header-link" href="/">Home</a><a class="header-link" href="/blog/">Blog</a><a class="header-link" href="https://github.com/mashruravi/notes" target="_blank" rel="noopener noreferrer">Notes</a></div><div class="hdr-col"><div class="hdr-col-menu"><div class="hdr-col-menu-bar hdr-col-menu-bar-1"></div><div class="hdr-col-menu-bar hdr-col-menu-bar-2"></div></div><div class="hdr-col-itm-ctr "><div class="hdr-col-itm-ctr-inner "><a class="header-link-col" href="/">Home</a><a class="header-link-col" href="/blog/">Blog</a><a class="header-link-col" href="https://github.com/mashruravi/notes" target="_blank" rel="noopener noreferrer">Notes</a></div></div></div></header></div><main style="padding-top:98px;min-width:350px;margin:auto;max-width:1100px;min-height:calc(100vh - 98px - 50px)"><div class="blog-content"><h1>Changes in the `executeScript` method for Chrome extensions</h1><div class="blog-body"><main><p>My team does virtual sprint retrospectives on <a href="https://easyretro.io/">EasyRetro</a> and I created a <a href="https://chrome.google.com/webstore/detail/easyretro-to-excel-conver/neoomajkccfdhhbffeobjiflainanfgh">Chrome extension</a> to download everything we write into a spreadsheet.</p><p>A few weeks back, the extension stopped working with the error <code>chrome.tabs.executeScript is not a function</code>. Unfortunately, I couldn&#x27;t figure out why a function that was working perfectly well suddenly stopped working. So I downgraded the extension to use <a href="https://developer.chrome.com/docs/extensions/mv2/">manifest v2</a> from <a href="https://developer.chrome.com/docs/extensions/mv3/intro/">manifest v3</a> which was still working fine.</p><p>Today, I decided to look into the issue again and found <a href="https://stackoverflow.com/a/66550386/5774633">this</a> answer on StackOverflow:</p><blockquote><p>The <code>executeScript</code> method in ManifestV3 has changed and is now in <code>chrome.scripting</code> API: <a href="https://developer.chrome.com/docs/extensions/reference/scripting/">https://developer.chrome.com/docs/extensions/reference/scripting/</a>Add this line in manifest.json:</p><p><code>&quot;permissions&quot;: [&quot;scripting&quot;]</code> </p><p>background.js</p><p><code>chrome.scripting.executeScript({
   target: {tabId: id, allFrames: true},
   files: [&#x27;content_scripts/cscript.js&#x27;],
});</code></p></blockquote><p>All the required information is also available in the <a href="https://developer.chrome.com/docs/extensions/reference/scripting/">official API reference for <code>chrome.scripting</code></a>.</p><h1>Changes in API</h1><p>The change wasn&#x27;t as simple as just adding the extra permission in the manifest and replacing <code>chrome.tabs</code> with <code>chrome.scripting</code>. There were a few more minor adjustments that had to be made in the code.</p><h2>Change in parameters</h2><p>This change was relatively simple. The previous method took three arguments: the tab ID, the code/file to execute and a callback that would be called with the results. The new method took only two arguments: the first was an object that contained the tab ID and the code/file to execute and the second was a callback function that would be called with the results.</p><p><strong>Before</strong></p><div><pre class="prism-code language-javascript" style="color:#393A34;background-color:#f6f8fa;padding:20px"><div class="token-line" style="color:#393A34"><span class="token plain">chrome</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">tabs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">executeScript</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tabId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> code</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">...</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div></pre></div><p><strong>After</strong></p><div><pre class="prism-code language-javascript" style="color:#393A34;background-color:#f6f8fa;padding:20px"><div class="token-line" style="color:#393A34"><span class="token plain">chrome</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">scripting</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">executeScript</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        target</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> tabId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div></pre></div><h2>No strings allowed</h2><p>With <code>chrome.tabs.executeScript</code> it was possible to execute a string on JavaScript, and this is exactly what I was doing - passing the code I wanted to execute on the page as a string.</p><p>In <code>chrome.scripting.executeScript</code> you can only pass a function or the name of a <code>.js</code> with the code you want to execute.</p><p>Since the code I wanted to execute on the web page was already in the form of a function in a multiline string, I found it easier to convert the string to an actual function and pass it to the <code>executeScript</code> method.</p><p><strong>Before</strong></p><div><pre class="prism-code language-javascript" style="color:#393A34;background-color:#f6f8fa;padding:20px"><div class="token-line" style="color:#393A34"><span class="token plain">chrome</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">tabs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">executeScript</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tabId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> code</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">...</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div></pre></div><p><strong>After</strong></p><div><pre class="prism-code language-javascript" style="color:#393A34;background-color:#f6f8fa;padding:20px"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">functionToExecute</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">chrome</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">scripting</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">executeScript</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        target</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> tabId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> functionToExecute</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div></pre></div><h2>Returning data from contentscript</h2><p>When passing a string with JavaScript code to execute on the page, the last statement in the string would be the name of the variable that you would like to return.</p><p>With the new method, since we pass an actual function or a <code>.js</code> file, we have to explicitly use a return statement to send a value to the callback.</p><p>Also, the callback now contains an array of objects with the result in the <code>result</code> property of each object.</p><p><strong>Before</strong></p><div><pre class="prism-code language-javascript" style="color:#393A34;background-color:#f6f8fa;padding:20px"><div class="token-line" style="color:#393A34"><span class="token plain">chrome</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">tabs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">executeScript</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    tabId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> code</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">const a = 2 * 4; a</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* res contains array with value &#x27;8&#x27; */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div></pre></div><p><strong>After</strong></p><div><pre class="prism-code language-javascript" style="color:#393A34;background-color:#f6f8fa;padding:20px"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">functionToExecute</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">chrome</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">scripting</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">executeScript</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        target</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> tabId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> functionToExecute</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* res contains array with value { result: 8 } */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div></pre></div></main></div></div></main><footer style="background-color:#6C6C6C;color:#FFF;font-size:12px"><div style="max-width:1100px;min-width:300px;margin:0 auto">© <!-- -->2021<!-- --> Ravi Suresh Mashru. All rights reserved.</div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2021-04-14-executescript-chrome-extension/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-2966d4d8fea208fd6f8f.js"],"app":["/app-74a31bded70636548752.js"],"component---src-components-blog-layout-js":["/component---src-components-blog-layout-js-88c55709438fb4ec120a.js"],"component---src-pages-404-js":["/component---src-pages-404-js-689cfc1b5c0a2e8a2c2e.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-ef2d04be001c14cea5f9.js"],"component---src-pages-index-js":["/component---src-pages-index-js-1e5df526c60fe79fc7b9.js"],"component---src-pages-reading-list-js":["/component---src-pages-reading-list-js-d3c0034680be27e8676e.js"]};/*]]>*/</script><script src="/polyfill-2966d4d8fea208fd6f8f.js" nomodule=""></script><script src="/component---src-components-blog-layout-js-88c55709438fb4ec120a.js" async=""></script><script src="/commons-eec8a13b1d76aa1aeedd.js" async=""></script><script src="/styles-e9d24b1846c7d6eb9685.js" async=""></script><script src="/app-74a31bded70636548752.js" async=""></script><script src="/framework-741ade27086b2708e961.js" async=""></script><script src="/webpack-runtime-185923be6d8fe92c21bd.js" async=""></script></body></html>